extends layout

block jquery_ui
  script(type='text/javasacript', src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js")
  script(type='text/javasacript', src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js")

block scripts
  link(rel='stylesheet', type='text/css', href='stylesheets/settings.css')
  script(type='text/javascript')
    $(function() {
      $( ".slider" ).slider({
        value: 50,
        start: function(event,ui) {},
        slide: function(event, ui) {},
        stop: function(event, ui) {
          var value = $(this).slider('value');
        },
      });
    });

    $(document).ready(function() {
      // for adding artists to the mix

      $('#Save').click(function (){
        var Artist_data = [];
        $('.Remove').each(function() {
          Artist_data.push([$(this).attr("artist"), $(this).parent().next('.slider').slider('value')]);
        });

        console.log(Artist_data);
        //When you figure out the routes add the proper stuff here
        $.post('/editArtist', {artists: Artist_data}
           , function (data) {
               $('#settingsBox').prepend(data);
               $("#newArtist").val("");
           });
      });
      //for removing artists
      $('.Remove').click(function (){
        console.log('Remove button clicked...');
        //nonfunctional again remember to add in proper attribute
        var artist = $(this).attr("artist");
        // and also here
        $(this).parent().parent().remove();
        $.post('/removeArtist', { artist: $(this).attr("artist") }, function(err, data){
          if (err) {
            console.log(err);
          }
        });
        //- document.location.href='/settings';
      });

      // for saving preferences
      $('#Add').click(function (){
        console.log("Add artist button has been clicked");
        console.log("New Artist: " + $("#newArtist").val());
        var newArtist = $("#newArtist").val();
        //When you figure out the routes add the proper stuff here
        $.post('/addArtist', {artist: newArtist}
           , function (data) {
               $('#settingsBox').prepend(data);
               $("#newArtist").val("");
           });
      });
    })

block content
  //Should we use another font this one is only good for titles and shits
  div(id='addBox')
    h3(id='line1') Add an Artist:
    textarea(rows="1", cols="20", id="newArtist", style="margin-top:-80px")
    input(type="button", class="btn btn-success addArtist", id="Add", value="Submit", style="margin-top:-60px")

  div(id='settingsBox')
    h3 Artists in your Mix
    div
      //Remove this line when you actually pass data this is just a sampler
      - var artists = ["Iron Maiden Tribute Band: The Bestest Ever", "Foo Fighters", "Wax Tailor"]
      each artist in artists
        div.artist
          p.artist_name
            //When you actually pass in data make sure to change this to reflect the proper attribute
            input(type="button", class="Remove btn btn-danger", value="-", artist="#{artist}")
            | #{artist}
          div(class="slider", style="margin-left:0px;")
    input(type="button", class="btn btn-success save", id="Save", value="Save Mix")
